<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>WG-Planer</title>

        <!-- Klasse WGPlanerApp: Steuert die gesamte Anwendung -->
        <script src="wgplanerapp.js"></script>
        <link rel="stylesheet" href="wgplanerapp.css" />

        <!-- Klasse AufgabenListe: Listet alle Aufgaben auf -->
        <script src="aufgaben-liste.js"></script>
        <link rel="stylesheet" href="aufgaben-liste.css" />

        <!-- Klasse Einkaufsliste: Listet eine Einkaufsliste auf und gibt Möglichkeiten zur Bearbeitung -->
        <script src="Einkaufsliste.js"></script>
        <link rel="stylesheet" href="Einkaufsliste.css" />

        <!-- Klasse AufgabeAnlegen: Wird benötigt um Aufgaben anzulegen aber auch um bereits erstellte zu bearbeiten -->
        <script src="aufgabe-anlegen.js"></script>
        <link rel="stylesheet" href="aufgabe-anlegen.css" />

        <!-- Wird für das Routing benötigt -->
        <script src="node_modules/navigo/lib/navigo.js"></script>

		<!-- Firebase -->
		<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-analytics.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-database.js"></script>

        <script>
            window.addEventListener("load", () => {
                let pages = [
                    {
                        name: "aufgaben-liste",
                        klass: TodoList,
                        label: "To do",
                        hidden: false,
                    },
                    {
                        name: "aufgabe-anlegen",
                        klass: AufgabeAnlegen,
                        label: "Aufgabe hinzufügen",
                        hidden: false,
                    },
                    {
                        name: "aufgabe-bearbeiten",
                        klass: AufgabeAnlegen,
                        label: "Aufgabe bearbeiten",
                        hidden: true,
                    },
                    {
                        name: "einkaufsliste",
                        klass: Einkaufsliste,
                        label: "Einkaufsliste",
                        hidden: false,
                    }
                ];

                // Navigo Router initialisieren
                let router = new Navigo(null, true, '#!');
                let app = new WGPlanerApp(pages, router);

                router.on(
                {
                    '/einkaufsliste': function ()
                    {
                        app.showPage("einkaufsliste", app.todos.length);
                    },
                    '/aufgabe/:id': function ( parameter )
                    {
                        app.showPage("aufgabe-bearbeiten", app.todos[parameter.id] ? parameter.id : undefined );
                    },
                    '/aufgaben': function ()
                    {
                        app.showPage("aufgaben-liste", 0);
                    },
                    '*': function ()
                    {
                        app.showPage("aufgaben-liste", 0);
                    }
                });
            });
        </script>
    </head>
    <body>
      <header id = "wgplanerapp-header">
        <ul>
        </ul>
      </header>

    </body>
    <html>
        <!-- Navigationsleiste -->
        <template id="vorlage-wgplanerapp-menu-li">
            <li data-page-name="$NAME$">
                <a>$LABEL$</a>
            </li>
        </template>

        <!-- AufgabenListe -->
        <main id="vorlage-aufgaben-liste" class="hidden">
          <div id="aufgaben-liste-kopf">
            <p>Aufgabenverteilung:</p>
            <button type="button" id="sortierButton">Dringlichkeit absteigend</button>
            <input type="text" id="filterKriterium" placeholder="Suche ...">
          </div>
          <ul id="aufgabenliste">
          </ul>
        </main>

        <template id="vorlage-aufgaben-liste-leer">
            <li>
                <div class="name">
                    Keine Aufgaben zu tun, habe einen schönen Tag:)
                </div>
            </li>
        </template>

        <!-- Seite: Adresse anlegen/bearbeiten -->
        <main id="main-aufgabe-bearbeiten" class="hidden">
        </main>

        <template id="vorlage-aufgabe-bearbeiten">
            <div>
                <div class="form">
                    <input class="aufgabe" placeholder="Aufgabe" value="$AUFGABE$" />
                    <input class="beschreibung" placeholder="Beschreibung" value="$BESCHREIBUNG$" />
                    <input class="zustaendig" placeholder="Zuständig" value="$ZUSTAENDIG$" />
                    <input class="dringlichkeit" placeholder="Dringlichkeit" value="$DRINGLICHKEIT$" />
                    <input class="datum" placeholder="Erledigen bis" value="$DATUM$" />
                </div>
                <div class="actions">
                    <div class="action save">
                        <a>Aufgabe speichern</a>
                    </div>
                </div>
            </div>
        </template>

        <main id="vorlage-einkaufsliste" class="hidden">

         <p id="titel">Einkaufsliste</p>
         <ul id="list">
         </ul>
         <label>
           <input type="button" class="addBtn" id="addBtn" value="+">

           <input type="text" id="myInput" placeholder="Lebensmittel..." list="lebensmittel" >
            <datalist id="lebensmittel">
               <option value="Milch"/>
               <option value="Zucker"/>
               <option value="Butter"/>
               <option value="Toilettenpapier"/>
               <option value="Handtücher"/>
               <option value="Spülmittel"/>
               <option value="Öl"/>
               <option value="Mehl"/>
               <option value="Salz"/>
               <option value="Brot"/>
            </datalist>
          </input>
        </label>

       </main>
    </html>
</html>
